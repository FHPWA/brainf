const MAX_SIZE=1024,MAX_INPUT=32,MAX_COMPLEXITY=1024;let calls=0,inputCounter=0;function brainfPlus(n,t){return calls++,n[t]<Number.MAX_SAFE_INTEGER?++n[t]:n[t]}function brainfMinus(n,t){return calls++,n[t]>Number.MIN_SAFE_INTEGER?--n[t]:n[t]}function brainfGreaterThan(n){return n<MAX_SIZE?++n:n}function brainfLessThan(n){return calls++,n>0?--n:n}function brainfPrint(n,t,e,r){switch(calls++,n){case"ASCII":document.getElementById(t).value+=String.fromCharCode(e[r]);break;case"INT":document.getElementById(t).value+=e[r]+", "}}function brainfInput(n,t,e){if(calls++,inputCounter++,inputCounter>=MAX_INPUT)return window.alert("Input called too many times"),-1;const r=window.prompt("Input ("+n+"):","");if(r.length<1)return window.alert("Input required"),-1;switch(n){case"ASCII":t[e]=r.charCodeAt(0);break;case"INT":t[e]=parseInt(r,10)}return 0}function brainfLeftBracket(n,t,e,r){if(calls++,0===e[r]){let e=0;for(;t<n.length;){t++;const r=n.charAt(t);if("["===r)e++;else if("]"===r){if(0===e)break;e--}}}return t}function brainfRightBracket(n,t,e,r){if(calls++,0!==e[r]){let e=0;for(;t>=0;){t--;const r=n.charAt(t);if("]"===r)e++;else if("["===r){if(0===e)break;e--}}}return t}function brainf(n,t,e){document.getElementById(e).value="",calls=0,inputCounter=0;const r=new Array(MAX_SIZE).fill(0);let a=0,i=0;const c=n.length;for(;i<c;){const c=n.charAt(i);if("<"===c&&(a=brainfLessThan(a)),">"===c&&(a=brainfGreaterThan(a)),"-"===c&&(r[a]=brainfMinus(r,a)),"+"===c&&(r[a]=brainfPlus(r,a)),"."===c&&brainfPrint(t,e,r,a),","===c){if(brainfInput(t,r,a)<0)return}if("["===c&&(i=brainfLeftBracket(n,i,r,a)),"]"===c&&(i=brainfRightBracket(n,i,r,a)),i++,calls>MAX_COMPLEXITY)return void window.alert("Too many calls")}}function brainfBF(){brainf(document.getElementById("code").value,document.getElementById("mode-ascii").checked?"ASCII":"INT","output")}